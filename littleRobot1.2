#include "mbed.h"

PwmOut red(D5);
PwmOut speaker(D6);
AnalogIn rightDial(A1);
int main()
{
    red.period_ms(10);/* suitably fast 100Hz */

    while(1){
        /* ramp up from 0 to 100% */
          float brightness = rightDial.read()*3.3;
          float volume = 1/(rightDial.read()*20.0e3);
          red.write(brightness);
          speaker.period(volume);
          speaker.write(0.5);
          wait_ms(100);
    }
}
